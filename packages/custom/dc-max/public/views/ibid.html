<div data-ng-controller="IbidController as ibidCtrl">
	<div class="view-header">
		<div class="container">
			<div class="pull-left">
				<h2>{{ibidCtrl.view.title}}</h2>
			</div>
			<div class="breadcrumbs pull-right">
				<a ui-sref="{{ibidCtrl.view.parentSref}}">{{ibidCtrl.view.parentTitle}}</a>&nbsp;/&nbsp;<span class="color-green">{{ibidCtrl.view.title}}</span>
			</div>
		</div>
	</div>

	<div class="view ibid-view">
		<div class="container">
			<div class="row">
				<div class="col-md-4">
					<form name="ibidCtrl.ibidFrm" novalidate>
						<uib-accordion close-others="false">
							<uib-accordion-group is-open="ibidCtrl.status.firstOpen">

								<uib-accordion-heading>
									General
									<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': ibidCtrl.status.firstOpen, 'glyphicon-chevron-right': !ibidCtrl.status.firstOpen}"></i>
								</uib-accordion-heading>

								<div class="form-group" bs-has>
									<label for="current-age-input">Current Age</label>
									<div class="input-group">
										<span class="input-group-addon"><span class="glyphicon glyphicon-user"></span></span>
										<input id="current-age-input" type="number" name="currentAge" ng-model="ibidCtrl.worksheet.currentAge" class="form-control" focus-on="firstOpened" required tabindex="0"/>
									</div>
									<span class="has-error" ng-show="ibidCtrl.ibidFrm.currentAge.$dirty && ibidCtrl.ibidFrm.currentAge.$invalid">
										<span ng-show="ibidCtrl.ibidFrm.currentAge.$error.required">Current Age is required.</span>
									</span>
								</div>

								<div class="form-group" bs-has>
									<label for="retirement-age-input">Retirement Age</label>
									<div class="input-group">
										<span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
										<input id="retirement-age-input" type="number" name="retirementAge" ng-model="ibidCtrl.worksheet.retirementAge" class="form-control" required tabindex="0"/>
									</div>
									<span class="has-error" ng-show="ibidCtrl.ibidFrm.retirementAge.$dirty && ibidCtrl.ibidFrm.retirementAge.$invalid">
										<span ng-show="ibidCtrl.ibidFrm.retirementAge.$error.required">Retirement Age is required.</span>
									</span>
								</div>

								<div class="form-group" bs-has>
									<label for="number-of-periods-input">Number of Retirement Years</label>
									<div class="input-group">
										<span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
										<input id="number-of-periods-input" type="number" name="numberOfPeriods" ng-model="ibidCtrl.worksheet.numberOfPeriods" class="form-control" required tabindex="0"/>
									</div>
									<span class="has-error" ng-show="ibidCtrl.ibidFrm.numberOfPeriods.$dirty && ibidCtrl.ibidFrm.numberOfPeriods.$invalid">
										<span ng-show="ibidCtrl.ibidFrm.numberOfPeriods.$error.required">Number of Retirement Years is required.</span>
									</span>
								</div>

								<input class="btn-u btn-u-default" type="button" data-ng-click="ibidCtrl.reset()" value="Reset" tabindex="-1"/>
								<input class="btn-u" type="submit" data-ng-click="ibidCtrl.updateGeneral(ibidCtrl.worksheet)" value="Continue" tabindex="0"/>

							</uib-accordion-group>
							<uib-accordion-group is-open="ibidCtrl.status.secondOpen">

								<uib-accordion-heading>
									Investment Account
									<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': ibidCtrl.status.secondOpen, 'glyphicon-chevron-right': !ibidCtrl.status.secondOpen}"></i>
								</uib-accordion-heading>

								<div class="form-group" bs-has>
									<label for="annual-deposit-input">Annual Contribution</label>
									<div class="input-group">
										<span class="input-group-addon"><span class="glyphicon glyphicon-usd"></span></span>
										<input id="annual-deposit-input" type="number" name="annualDeposit" ng-model="ibidCtrl.worksheet.annualDeposit" focus-on="secondOpened" class="form-control" required tabindex="0"/>
										<span class="input-group-addon">.00</span>
									</div>
									<span class="has-error" ng-show="ibidCtrl.ibidFrm.annualDeposit.$dirty && ibidCtrl.ibidFrm.annualDeposit.$invalid">
										<span ng-show="ibidCtrl.ibidFrm.annualDeposit.$error.required">Annual Deposit is required.</span>
									</span>
								</div>

								<div class="form-group" bs-has>
									<label for="growth-rate-input">Annual Contribution Increase</label>
									<div class="input-group">
										<span class="input-group-addon"><span class="glyphicon glyphicon-stats"></span></span>
										<input id="growth-rate-input" type="number" name="growthRate" ng-model="ibidCtrl.worksheet.growthRate" class="form-control" required tabindex="0"/>
										<span class="input-group-addon">%&nbsp;</span>
									</div>
									<span class="has-error" ng-show="ibidCtrl.abidFrm.growthRate.$dirty && ibidCtrl.abidFrm.growthRate.$invalid">
										<span ng-show="ibidCtrl.abidFrm.growthRate.$error.required">Gross Rate is required.</span>
									</span>
								</div>

								<div class="form-group" bs-has>
									<label for="rate-of-return-input">Gross Rate of Return</label>
									<div class="input-group">
										<span class="input-group-addon"><span class="glyphicon glyphicon-stats"></span></span>
										<input id="rate-of-return-input" type="number" name="rateOfReturn" ng-model="ibidCtrl.worksheet.rateOfReturn" class="form-control" required tabindex="0"/>
										<span class="input-group-addon">%&nbsp;</span>
									</div>
									<span class="has-error" ng-show="ibidCtrl.ibidFrm.rateOfReturn.$dirty && ibidCtrl.ibidFrm.rateOfReturn.$invalid">
										<span ng-show="ibidCtrl.ibidFrm.rateOfReturn.$error.required">Gross Rate of Return is required.</span>
									</span>
								</div>

								<div class="form-group" bs-has>
									<label for="management-fee-input">Management Fee</label>
									<div class="input-group">
										<span class="input-group-addon"><span class="glyphicon glyphicon-stats"></span></span>
										<input id="management-fee-input" type="number" name="managementFee" ng-model="ibidCtrl.worksheet.managementFee" class="form-control" required tabindex="0"/>
										<span class="input-group-addon">%&nbsp;</span>
									</div>
									<span class="has-error" ng-show="ibidCtrl.ibidFrm.managementFee.$dirty && ibidCtrl.ibidFrm.managementFee.$invalid">
										<span ng-show="ibidCtrl.ibidFrm.managementFee.$error.required">Management Fee is required.</span>
									</span>
								</div>

								<input class="btn-u btn-u-default" type="button" data-ng-click="ibidCtrl.reset()" value="Reset" tabindex="-1"/>
								<input class="btn-u" type="submit" data-ng-click="ibidCtrl.getBaseline(ibidCtrl.worksheet)" value="Plot 4%" tabindex="0"/>

							</uib-accordion-group>
							<uib-accordion-group is-open="ibidCtrl.status.thirdOpen">

								<uib-accordion-heading>
									Index UL
									<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': ibidCtrl.status.thirdOpen, 'glyphicon-chevron-right': !ibidCtrl.status.thirdOpen}"></i>
								</uib-accordion-heading>

								<div class="form-group" bs-has>
									<label for="insurance-product-income-input">Annual Income</label>
									<div class="input-group">
										<span class="input-group-addon"><span class="glyphicon glyphicon-usd"></span></span>
										<input id="insurance-product-income-input" type="number" name="insuranceProductIncome" ng-model="ibidCtrl.worksheet.insuranceProductIncome" class="form-control" focus-on="thirdOpened" required tabindex="0"/>
										<span class="input-group-addon">.00</span>
									</div>
									<span class="has-error" ng-show="ibidCtrl.ibidFrm.insuranceProductIncome.$dirty && ibidCtrl.ibidFrm.insuranceProductIncome.$invalid">
										<span ng-show="ibidCtrl.ibidFrm.insuranceProductIncome.$error.required">Annual Income is required.</span>
									</span>
								</div>

								<input class="btn-u btn-u-default" type="button" data-ng-click="ibidCtrl.reset()" value="Reset" tabindex="-1"/>
								<input class="btn-u" type="submit" data-ng-click="ibidCtrl.getBreakEvenAnalysis(ibidCtrl.worksheet)" value="Compare" tabindex="0"/>

								<hr>

								<p ng-show="ibidCtrl.status.advancedOptionsDisabled">Subscribe to Modify Options</p>

								<div class="form-group" bs-has>
									<label for="initial-withdrawal-input">Initial Withdrawal</label>
									<div class="input-group">
										<span class="input-group-addon"><span class="glyphicon glyphicon-stats"></span></span>
										<input id="initial-withdrawal-input" type="number" name="initialWithdrawal" ng-model="ibidCtrl.worksheet.initialWithdrawal" class="form-control" required ng-disabled="ibidCtrl.status.advancedOptionsDisabled" tabindex="0"/>
										<span class="input-group-addon">%&nbsp;</span>
									</div>
									<span class="has-error" ng-show="ibidCtrl.ibidFrm.initialWithdrawal.$dirty && ibidCtrl.ibidFrm.initialWithdrawal.$invalid">
										<span ng-show="ibidCtrl.ibidFrm.initialWithdrawal.$error.required">Annual Withdrawal is required.</span>
									</span>
								</div>

								<div class="form-group" bs-has>
									<label for="inflation-rate-input">Annual Inflation Rate</label>
									<div class="input-group">
										<span class="input-group-addon"><span class="glyphicon glyphicon-stats"></span></span>
										<input id="inflation-rate-input" type="number" name="inflationRate" ng-model="ibidCtrl.worksheet.inflationRate" class="form-control" required ng-disabled="ibidCtrl.status.advancedOptionsDisabled" tabindex="0"/>
										<span class="input-group-addon">%&nbsp;</span>
									</div>
									<span class="has-error" ng-show="ibidCtrl.ibidFrm.inflationRate.$dirty && ibidCtrl.ibidFrm.inflationRate.$invalid">
										<span ng-show="ibidCtrl.ibidFrm.inflationRate.$error.required">Annual Inflation Rate is required.</span>
									</span>
								</div>

								<div class="form-group">
									<label for="client-name-input">Client Name</label>
									<div class="input-group">
										<span class="input-group-addon"><span class="glyphicon glyphicon-user"></span></span>
										<input id="client-name-input" type="text" name="clientName" ng-model="ibidCtrl.worksheet.clientName" class="form-control" ng-disabled="ibidCtrl.status.advancedOptionsDisabled" tabindex="0"/>
									</div>
								</div>

								<div class="form-group">
									<label for="insurance-company-input">Insurance Company</label>
									<div class="input-group">
										<span class="input-group-addon"><span class="glyphicon glyphicon-folder-open"></span></span>
										<input id="insurance-company-input" type="text" name="insuranceCompany" ng-model="ibidCtrl.worksheet.insuranceCompany" class="form-control" ng-disabled="ibidCtrl.status.advancedOptionsDisabled" tabindex="0"/>
									</div>
								</div>

								<input class="btn-u" type="submit" data-ng-click="ibidCtrl.getPdf(ibidCtrl.worksheet)" value="Generate Pdf" ng-disabled="ibidCtrl.status.advancedOptionsDisabled" tabindex="0"/>

							</uib-accordion-group>
						</uib-accordion>
					</form>
				</div>
				<div class="col-md-8">
					<uib-tabset justified="true">
						<uib-tab heading="4% Baseline" active="ibidCtrl.status.baselineActive">
							<div class="frm-u" ng-show="ibidCtrl.status.baselineVisible">
								<header>Your First Year Of Retirement</header>
								<fieldset>
									<div class="row">
										<div class="col-md-6">
											<div class="form-group">
												<label for="baseline-investment-income-input">Income From 4% Rule</label>
												<div class="input-group">
													<span class="input-group-addon"><span class="glyphicon glyphicon-usd"></span></span>
													<input id="baseline-investment-income-input" type="number" ng-model="ibidCtrl.baseline.firstPayout.cumulativeInvestmentIncome" class="form-control" tabindex="-1" readonly/>
													<span class="input-group-addon">.00</span>
												</div>
											</div>
										</div>
										<div class="col-md-6">
											<div class="form-group">
												<label for="baseline-rate-of-return-input">Annual Rate of Return</label>
												<div class="input-group">
													<span class="input-group-addon"><span class="glyphicon glyphicon-stats"></span></span>
													<input id="baseline-rate-of-return-input" type="number" ng-model="ibidCtrl.baseline.grossRateOfReturn" class="form-control" tabindex="-1" readonly/>
													<span class="input-group-addon">%&nbsp;</span>
												</div>
											</div>
										</div>
									</div>
								</fieldset>
								<footer>
									<highchart value="ibidCtrl.baselineChart"></highchart>
								</footer>
							</div>
						</uib-tab>
						<uib-tab heading="Break-Even Analysis" active="ibidCtrl.status.breakEvenAnalysisActive">
							<div class="frm-u" ng-show="ibidCtrl.status.breakEvenAnalysisVisible">
								<header>Your First Year Of Retirement</header>
								<fieldset>
									<div class="row">
										<div class="col-md-6">
											<div class="form-group">
												<label for="break-even-insurance-product-income-input">Income From UL</label>
												<div class="input-group">
													<span class="input-group-addon"><span class="glyphicon glyphicon-usd"></span></span>
													<input id="break-even-insurance-product-income-input" type="number" ng-model="ibidCtrl.breakEvenAnalysis.firstPayout.cumulativeInsuranceProductIncome" class="form-control" tabindex="-1" readonly/>
													<span class="input-group-addon">.00</span>
												</div>
											</div>
										</div>
										<div class="col-md-6">
											<div class="form-group">
												<label for="break-even-investment-income-input">Income From 4% Rule</label>
												<div class="input-group">
													<span class="input-group-addon"><span class="glyphicon glyphicon-usd"></span></span>
													<input id="break-even-investment-income-input" type="number" ng-model="ibidCtrl.breakEvenAnalysis.firstPayout.cumulativeInvestmentIncome" class="form-control" tabindex="-1" readonly/>
													<span class="input-group-addon">.00</span>
												</div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-6">
											<div class="form-group">
												<label for="break-even-income-differential-input">Index UL Advantage</label>
												<div class="input-group">
													<span class="input-group-addon"><span class="glyphicon glyphicon-thumbs-up"></span></span>
													<input id="break-even-income-differential-input" type="number" ng-model="ibidCtrl.breakEvenAnalysis.firstPayout.cumulativeIncomeDifferential" class="form-control" tabindex="-1" readonly/>
													<span class="input-group-addon">%&nbsp;</span>
												</div>
											</div>
										</div>
										<div class="col-md-6">
											<label for="break-even-rate-of-return-input">Annual Rate Of Return</label>
											<div class="input-group">
												<span class="input-group-addon"><span class="glyphicon glyphicon-stats"></span></span>
												<input id="break-even-rate-of-return-input" type="number" ng-model="ibidCtrl.breakEvenAnalysis.grossRateOfReturn" class="form-control" tabindex="-1" readonly/>
												<span class="input-group-addon">%&nbsp;</span>
											</div>
										</div>
									</div>
								</fieldset>
								<footer>
									<highchart value="ibidCtrl.breakEvenAnalysisChart"></highchart>
									<hr/>
									<div class="row">
										<div class="col-md-6">
											<div class="form-group" ng-show="ibidCtrl.breakEvenAnalysis.breakEvenAge">
												<label for="break-even-age-input">Break-Even Age</label>
												<div class="input-group">
													<span class="input-group-addon"><span class="glyphicon glyphicon-user"></span></span>
													<input id="break-even-age-input" type="number" ng-model="ibidCtrl.breakEvenAnalysis.breakEvenAge" class="form-control" tabindex="-1" readonly/>
												</div>
											</div>
											<div class="form-group" ng-show="!ibidCtrl.breakEvenAnalysis.breakEvenAge">
												<label>Break-Even Age Never Reached</label>
											</div>
										</div>
										<div class="col-md-6">
											&nbsp;
										</div>
									</div>
								</footer>
							</div>
						</uib-tab>
						<uib-tab heading="Periodic Analysis" active="ibidCtrl.status.cumulativePayoutActive">
							<div class="frm-u" ng-show="ibidCtrl.status.cumulativePayoutVisible">
								<header>Your "Go-Go" Years</header>
								<fieldset>
									<div class="row">
										<div class="col-md-6">
											<div class="form-group">
												<label for="periodic-insurance-product-income-input">Income From UL</label>
												<div class="input-group">
													<span class="input-group-addon"><span class="glyphicon glyphicon-usd"></span></span>
													<input id="periodic-insurance-product-income-input" type="number" ng-model="ibidCtrl.breakEvenAnalysis.firstPeriodicPayout.cumulativeInsuranceProductIncome" class="form-control" tabindex="-1" readonly/>
													<span class="input-group-addon">.00</span>
												</div>
											</div>
										</div>
										<div class="col-md-6">
											<div class="form-group">
												<label for="periodic-investment-income-input">Income From 4% Rule</label>
												<div class="input-group">
													<span class="input-group-addon"><span class="glyphicon glyphicon-usd"></span></span>
													<input id="periodic-investment-income-input" type="number" ng-model="ibidCtrl.breakEvenAnalysis.firstPeriodicPayout.cumulativeInvestmentIncome" class="form-control" tabindex="-1" readonly/>
													<span class="input-group-addon">.00</span>
												</div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-6">
											<div class="form-group">
												<label for="periodic-income-differential-input">Index UL Advantage</label>
												<div class="input-group">
													<span class="input-group-addon"><span class="glyphicon glyphicon-thumbs-up"></span></span>
													<input id="periodic-income-differential-input" type="number" ng-model="ibidCtrl.breakEvenAnalysis.firstPeriodicPayout.cumulativeIncomeDifferential" class="form-control" tabindex="-1" readonly/>
													<span class="input-group-addon">%&nbsp;</span>
												</div>
											</div>
										</div>
										<div class="col-md-6">
											<label for="periodic-rate-of-return-input">Annual Rate Of Return</label>
											<div class="input-group">
												<span class="input-group-addon"><span class="glyphicon glyphicon-stats"></span></span>
												<input id="periodic-rate-of-return-input" type="number" ng-model="ibidCtrl.breakEvenAnalysis.grossRateOfReturn" class="form-control" tabindex="-1" readonly/>
												<span class="input-group-addon">%&nbsp;</span>
											</div>
										</div>
									</div>
								</fieldset>
								<footer>
									<highchart value="ibidCtrl.cumulativePayoutChart"></highchart>
									<hr/>
									<div class="row">
										<div class="col-md-4">
											<div class="panel panel-success">
												<div class="panel-heading">
													<h3 class="panel-title">Go-Go Years</h3>
													<h4>{{ibidCtrl.breakEvenAnalysis.periodicSeriesData.seriesC[0]}}% Advantage</h4>
												</div>
												<table class="table">
													<thead>
													<tr>
														<th>Age</th>
														<th>UL</th>
														<th>4% Rule</th>
													</tr>
													</thead>
													<tbody>
													<tr ng-repeat="payout in ibidCtrl.breakEvenAnalysis.gogoPayouts">
														<th scope="row">{{payout.age}}</th>
														<td>{{payout.cumulativeInsuranceProductIncome|currency:'$':0}}</td>
														<td>{{payout.cumulativeInvestmentIncome|currency:'$':0}}</td>
													</tbody>
												</table>
											</div>
										</div>
										<div class="col-md-4">
											<div class="panel panel-warning">
												<div class="panel-heading">
													<h3 class="panel-title">Slow-Go Years</h3>
													<h4>{{ibidCtrl.breakEvenAnalysis.periodicSeriesData.seriesC[1]}}% Advantage</h4>
												</div>
												<table class="table">
													<thead>
													<tr>
														<th>Age</th>
														<th>UL</th>
														<th>4% Rule</th>
													</tr>
													</thead>
													<tbody>
													<tr ng-repeat="payout in ibidCtrl.breakEvenAnalysis.slowgoPayouts">
														<th scope="row">{{payout.age}}</th>
														<td>{{payout.cumulativeInsuranceProductIncome|currency:'$':0}}</td>
														<td>{{payout.cumulativeInvestmentIncome|currency:'$':0}}</td>
													</tbody>
												</table>
											</div>
										</div>
										<div class="col-md-4">
											<div class="panel panel-danger">
												<div class="panel-heading">
													<h3 class="panel-title">No-Go Years</h3>
													<h4>{{ibidCtrl.breakEvenAnalysis.periodicSeriesData.seriesC[2]}}% Advantage</h4>
												</div>
												<table class="table">
													<thead>
													<tr>
														<th>Age</th>
														<th>UL</th>
														<th>4% Rule</th>
													</tr>
													</thead>
													<tbody>
													<tr ng-repeat="payout in ibidCtrl.breakEvenAnalysis.nogoPayouts">
														<th scope="row">{{payout.age}}</th>
														<td>{{payout.cumulativeInsuranceProductIncome|currency:'$':0}}</td>
														<td>{{payout.cumulativeInvestmentIncome|currency:'$':0}}</td>
													</tbody>
												</table>
											</div>
										</div>
									</div>
								</footer>
							</div>
						</uib-tab>
					</uib-tabset>
				</div>
			</div>
		</div>
	</div>
</div>
