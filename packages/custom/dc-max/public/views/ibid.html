<div class="view ibid-view" data-ng-controller="IbidController as ibidCtrl">
	<div class="row">
		<div class="col-xs-4">
			<form name="ibidCtrl.ibidFrm" novalidate>
				<uib-accordion close-others="false">
					<uib-accordion-group is-open="ibidCtrl.status.firstOpen">
						<uib-accordion-heading>
							General
							<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': ibidCtrl.status.firstOpen, 'glyphicon-chevron-right': !ibidCtrl.status.firstOpen}"></i>
						</uib-accordion-heading>

						<div class="form-group" bs-has>
							<label for="current-age-input">Current Age</label>
							<input id="current-age-input" type="number" name="currentAge" ng-model="ibidCtrl.worksheet.currentAge" class="form-control" focus-on="firstOpened" required tabindex="0"/>
							<span class="has-error" ng-show="ibidCtrl.ibidFrm.currentAge.$dirty && ibidCtrl.ibidFrm.currentAge.$invalid">
								<span ng-show="ibidCtrl.ibidFrm.currentAge.$error.required">Current Age is required.</span>
							</span>
						</div>

						<div class="form-group" bs-has>
							<label for="retirement-age-input">Retirement Age</label>
							<input id="retirement-age-input" type="number" name="retirementAge" ng-model="ibidCtrl.worksheet.retirementAge" class="form-control" required tabindex="0"/>
							<span class="has-error" ng-show="ibidCtrl.ibidFrm.retirementAge.$dirty && ibidCtrl.ibidFrm.retirementAge.$invalid">
								<span ng-show="ibidCtrl.ibidFrm.retirementAge.$error.required">Retirement Age is required.</span>
							</span>
						</div>

						<div class="form-group" bs-has>
							<label for="number-of-periods-input">Number of Retirement Years</label>
							<input id="number-of-periods-input" type="number" name="numberOfPeriods" ng-model="ibidCtrl.worksheet.numberOfPeriods" class="form-control" required tabindex="0"/>
							<span class="has-error" ng-show="ibidCtrl.ibidFrm.numberOfPeriods.$dirty && ibidCtrl.ibidFrm.numberOfPeriods.$invalid">
								<span ng-show="ibidCtrl.ibidFrm.numberOfPeriods.$error.required">Number of Retirement Years is required.</span>
							</span>
						</div>
						<input class="btn-u btn-u-default" type="button" data-ng-click="ibidCtrl.reset()" value="Reset" tabindex="-1"/>
						<input class="btn-u" type="submit" data-ng-click="ibidCtrl.updateGeneral(ibidCtrl.worksheet)" value="Continue" tabindex="0"/>

					</uib-accordion-group>
					<uib-accordion-group is-open="ibidCtrl.status.secondOpen">
						<uib-accordion-heading>
							Investment Account
							<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': ibidCtrl.status.secondOpen, 'glyphicon-chevron-right': !ibidCtrl.status.secondOpen}"></i>
						</uib-accordion-heading>
						<div class="form-group" bs-has>
							<label for="annual-deposit-input">Annual Contribution</label>

							<div class="input-group">
								<span class="input-group-addon">$</span>
								<input id="annual-deposit-input" type="number" name="annualDeposit" ng-model="ibidCtrl.worksheet.annualDeposit" focus-on="secondOpened" class="form-control" required tabindex="0"/>
								<span class="input-group-addon">.00</span>
							</div>
							<span class="has-error" ng-show="ibidCtrl.ibidFrm.annualDeposit.$dirty && ibidCtrl.ibidFrm.annualDeposit.$invalid">
								<span ng-show="ibidCtrl.ibidFrm.annualDeposit.$error.required">Annual Contribution is required.</span>
							</span>
						</div>

						<div class="form-group" bs-has>
							<label for="growth-rate-input">Annual Contribution Increase</label>

							<div class="input-group">
								<input id="growth-rate-input" type="number" name="growthRate" ng-model="ibidCtrl.worksheet.growthRate" class="form-control" required tabindex="0"/>
								<span class="input-group-addon">%</span>
							</div>
							<span class="has-error" ng-show="ibidCtrl.ibidFrm.growthRate.$dirty && ibidCtrl.ibidFrm.growthRate.$invalid">
								<span ng-show="ibidCtrl.ibidFrm.growthRate.$error.required">Annual Contribution Increase is required.</span>
							</span>
						</div>

						<div class="form-group" bs-has>
							<label for="rate-of-return-input">Gross Rate of Return</label>

							<div class="input-group">
								<input id="rate-of-return-input" type="number" name="rateOfReturn" ng-model="ibidCtrl.worksheet.rateOfReturn" class="form-control" required tabindex="0"/>
								<span class="input-group-addon">%</span>
							</div>
							<span class="has-error" ng-show="ibidCtrl.ibidFrm.rateOfReturn.$dirty && ibidCtrl.ibidFrm.rateOfReturn.$invalid">
								<span ng-show="ibidCtrl.ibidFrm.rateOfReturn.$error.required">Gross Rate of Return is required.</span>
							</span>
						</div>

						<div class="form-group" bs-has>
							<label for="management-fee-input">Management Fee</label>

							<div class="input-group">
								<input id="management-fee-input" type="number" name="managementFee" ng-model="ibidCtrl.worksheet.managementFee" class="form-control" required tabindex="0"/>
								<span class="input-group-addon">%</span>
							</div>
							<span class="has-error" ng-show="ibidCtrl.ibidFrm.managementFee.$dirty && ibidCtrl.ibidFrm.managementFee.$invalid">
								<span ng-show="ibidCtrl.ibidFrm.managementFee.$error.required">Management Fee is required.</span>
							</span>
						</div>

						<input class="btn-u btn-u-default" type="button" data-ng-click="ibidCtrl.reset()" value="Reset" tabindex="-1"/>
						<input class="btn-u" type="submit" data-ng-click="ibidCtrl.getBaseline(ibidCtrl.worksheet)" value="Plot 4%" tabindex="0"/>
					</uib-accordion-group>
					<uib-accordion-group is-open="ibidCtrl.status.thirdOpen">
						<uib-accordion-heading>
							Index Annuity
							<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': ibidCtrl.status.thirdOpen, 'glyphicon-chevron-right': !ibidCtrl.status.thirdOpen}"></i>
						</uib-accordion-heading>
						<div class="form-group" bs-has>

							<label for="insurance-product-income-input">Annual Income</label>

							<div class="input-group">
								<span class="input-group-addon">$</span>
								<input id="insurance-product-income-input" type="number" name="insuranceProductIncome" ng-model="ibidCtrl.worksheet.insuranceProductIncome" class="form-control" focus-on="thirdOpened" required tabindex="0"/>
								<span class="input-group-addon">.00</span>
							</div>
							<span class="has-error" ng-show="ibidCtrl.ibidFrm.insuranceProductIncome.$dirty && ibidCtrl.ibidFrm.insuranceProductIncome.$invalid">
								<span ng-show="ibidCtrl.ibidFrm.insuranceProductIncome.$error.required">Annual Income is required.</span>
							</span>
						</div>

						<input class="btn-u btn-u-default" type="button" data-ng-click="ibidCtrl.reset()" value="Reset" tabindex="-1"/>
						<input class="btn-u" type="submit" data-ng-click="ibidCtrl.getBreakEvenAnalysis(ibidCtrl.worksheet)" value="Compare" tabindex="0"/>

						<hr>
						<p ng-show="ibidCtrl.status.advancedOptionsDisabled">Subscribe to Modify Options</p>

						<div class="form-group" bs-has>
							<label for="initial-withdrawal-input">Initial Withdrawal</label>

							<div class="input-group">
								<input id="initial-withdrawal-input" type="number" name="initialWithdrawal" ng-model="ibidCtrl.worksheet.initialWithdrawal" class="form-control" required ng-disabled="ibidCtrl.status.advancedOptionsDisabled" tabindex="0"/>
								<span class="input-group-addon">%</span>
							</div>
							<span class="has-error" ng-show="ibidCtrl.ibidFrm.initialWithdrawal.$dirty && ibidCtrl.ibidFrm.initialWithdrawal.$invalid">
								<span ng-show="ibidCtrl.ibidFrm.initialWithdrawal.$error.required">Initial Withdrawal is required.</span>
							</span>
						</div>

						<div class="form-group" bs-has>
							<label for="inflation-rate-input">Annual Inflation Rate</label>

							<div class="input-group">
								<input id="inflation-rate-input" type="number" name="inflationRate" ng-model="ibidCtrl.worksheet.inflationRate" class="form-control" required ng-disabled="ibidCtrl.status.advancedOptionsDisabled" tabindex="0"/>
								<span class="input-group-addon">%</span>
							</div>
							<span class="has-error" ng-show="ibidCtrl.ibidFrm.inflationRate.$dirty && ibidCtrl.ibidFrm.inflationRate.$invalid">
								<span ng-show="ibidCtrl.ibidFrm.inflationRate.$error.required">Annual Inflation Rate is required.</span>
							</span>
						</div>

						<div class="form-group">
							<label for="client-name-input">Client Name</label>
							<input id="client-name-input" type="text" name="clientName" ng-model="ibidCtrl.worksheet.clientName" class="form-control" ng-disabled="ibidCtrl.status.advancedOptionsDisabled" tabindex="0"/>
						</div>

						<div class="form-group">
							<label for="insurance-company-input">Insurance Company</label>
							<input id="insurance-company-input" type="text" name="insuranceCompany" ng-model="ibidCtrl.worksheet.insuranceCompany" class="form-control" ng-disabled="ibidCtrl.status.advancedOptionsDisabled" tabindex="0"/>
						</div>
						<input class="btn-u" type="submit" data-ng-click="ibidCtrl.getPdf(ibidCtrl.worksheet)" value="Generate Pdf" ng-disabled="ibidCtrl.status.advancedOptionsDisabled" tabindex="0"/>
					</uib-accordion-group>
				</uib-accordion>
			</form>
		</div>
		<div class="col-xs-8">
			<uib-tabset>
				<uib-tab heading="4% Baseline" active="ibidCtrl.status.baselineActive">
					<div ng-show="ibidCtrl.status.baselineVisible">
						<div class="row">
							<div class="col-xs-12"><h3>First Year</h3></div>
						</div>
						<div class="row">
							<div class="col-xs-12">Income from 4% Rule</div>
						</div>
						<div class="row">
							<div class="col-xs-12"><h3 ng-bind="ibidCtrl.baseline.investmentIncome|currency:'$':0"></h3>
							</div>
						</div>
						<div class="row">
							<div class="col-xs-12"><span ng-bind="ibidCtrl.baseline.rateOfReturnMessage"></span></div>
						</div>
						<div class="row">
							<div class="col-xs-12">
								<highchart value="ibidCtrl.baselineChart"></highchart>
							</div>
						</div>
					</div>
				</uib-tab>
				<uib-tab heading="Break-even Age" active="ibidCtrl.status.breakEvenAnalysisActive">
					<div ng-show="ibidCtrl.status.breakEvenAnalysisVisible">
						<div class="row">
							<div class="col-xs-12"><h3>First Year</h3></div>
						</div>
						<div class="row">
							<div class="col-xs-4">Income from Annuity</div>
							<div class="col-xs-4">&nbsp;</div>
							<div class="col-xs-4">Income from 4% Rule</div>
						</div>
						<div class="row">
							<div class="col-xs-4">
								<h3 ng-bind="ibidCtrl.breakEvenAnalysis.insuranceProductIncome|currency:'$':0"></h3>
							</div>
							<div class="col-xs-4"><h3>VS.</h3></div>
							<div class="col-xs-4">
								<h3 ng-bind="ibidCtrl.breakEvenAnalysis.investmentIncome|currency:'$':0"></h3>
							</div>
						</div>
						<div class="row">
							<div class="col-xs-4"><span ng-bind="ibidCtrl.breakEvenAnalysis.rateOfReturnMessage"></span>
							</div>
							<div class="col-xs-4">&nbsp;</div>
							<div class="col-xs-4"><span ng-bind="ibidCtrl.breakEvenAnalysis.rateOfReturnMessage"></span>
							</div>
						</div>
						<div class="row">
							<div class="col-xs-12">
								<highchart value="ibidCtrl.breakEvenAnalysisChart"></highchart>
							</div>
						</div>
						<div class="row">
							<div class="col-xs-12"><h2>Break-even Age</h2></div>
						</div>
						<div class="row">
							<div class="col-xs-12"><h2 ng-bind="ibidCtrl.breakEvenAnalysis.breakEvenMessage"></h2></div>
						</div>
					</div>
				</uib-tab>
				<uib-tab heading="Cumulative Payout" active="ibidCtrl.status.cumulativePayoutActive">
					<div ng-show="ibidCtrl.status.cumulativePayoutVisible">
						<div class="row">
							<div class="col-xs-12">
								<highchart value="ibidCtrl.cumulativePayoutChart"></highchart>
							</div>
						</div>
						<div class="row">
							<div class="col-xs-4">
								<div class="row">
									<div class="col-xs-12"><h2>Go-Go Years</h2></div>
								</div>
								<div class="row">
									<div class="col-xs-4">Age</div>
									<div class="col-xs-4">Annuity Income</div>
									<div class="col-xs-4">Investment Income</div>
								</div>
								<div class="row" ng-repeat="payout in ibidCtrl.breakEvenAnalysis.gogoPayouts">
									<div class="col-xs-4">{{payout.age}}</div>
									<div class="col-xs-4">{{payout.cumulativeInsuranceProductIncome|currency:'$':0}}</div>
									<div class="col-xs-4">{{payout.cumulativeInvestmentIncome|currency:'$':0}}</div>
								</div>
							</div>
							<div class="col-xs-4">
								<div class="row">
									<div class="col-xs-12"><h2>Slow-Go Years</h2></div>
								</div>
								<div class="row">
									<div class="col-xs-4">Age</div>
									<div class="col-xs-4">Annuity Income</div>
									<div class="col-xs-4">Investment Income</div>
								</div>
								<div class="row" ng-repeat="payout in ibidCtrl.breakEvenAnalysis.slowgoPayouts">
									<div class="col-xs-4">{{payout.age}}</div>
									<div class="col-xs-4">{{payout.cumulativeInsuranceProductIncome|currency:'$':0}}</div>
									<div class="col-xs-4">{{payout.cumulativeInvestmentIncome|currency:'$':0}}</div>
								</div>
							</div>
							<div class="col-xs-4">
								<div class="row">
									<div class="col-xs-12"><h2>No-Go Years</h2></div>
								</div>
								<div class="row">
									<div class="col-xs-4">Age</div>
									<div class="col-xs-4">Annuity Income</div>
									<div class="col-xs-4">Investment Income</div>
								</div>
								<div class="row" ng-repeat="payout in ibidCtrl.breakEvenAnalysis.nogoPayouts">
									<div class="col-xs-4">{{payout.age}}</div>
									<div class="col-xs-4">{{payout.cumulativeInsuranceProductIncome|currency:'$':0}}</div>
									<div class="col-xs-4">{{payout.cumulativeInvestmentIncome|currency:'$':0}}</div>
								</div>
							</div>
						</div>
					</div>
				</uib-tab>
			</uib-tabset>
		</div>
	</div>
</div>
